R Tidy
================

Baseline/Follow-up ratio
------------------------

BA: Baseline, FO: Follow-up, 3 variables

``` r
library(knitr)

library(tidyr)
library(dplyr)
```

``` r
df = data.frame(Subject=rep(c("S1","S2","S3"), each=2),
                Measure=rep(c("BA","FO"), 3),
                Var1=rnorm(6), Var2=rnorm(6), Var3=rnorm(6))

kable(df)
```

| Subject | Measure |        Var1|        Var2|        Var3|
|:--------|:--------|-----------:|-----------:|-----------:|
| S1      | BA      |   0.2194497|   0.0348866|  -0.0336562|
| S1      | FO      |   0.4782872|  -1.1173037|  -1.8890313|
| S2      | BA      |  -1.0941976|   0.1721864|  -2.1085136|
| S2      | FO      |   0.6169720|   1.8379409|   1.4330097|
| S3      | BA      |  -1.4710519|   1.9320189|   0.6901743|
| S3      | FO      |  -0.8408262|  -0.6925225|   0.4107205|

``` r
df_ratio = df %>% 
  gather(Var, Value, Var1:Var3) %>%
  group_by(Subject, Var) %>%
  spread(Measure, Value) %>%
  mutate(Ratio=BA/FO)

kable(df_ratio)
```

| Subject | Var  |          BA|          FO|       Ratio|
|:--------|:-----|-----------:|-----------:|-----------:|
| S1      | Var1 |   0.2194497|   0.4782872|   0.4588241|
| S1      | Var2 |   0.0348866|  -1.1173037|  -0.0312239|
| S1      | Var3 |  -0.0336562|  -1.8890313|   0.0178166|
| S2      | Var1 |  -1.0941976|   0.6169720|  -1.7734962|
| S2      | Var2 |   0.1721864|   1.8379409|   0.0936844|
| S2      | Var3 |  -2.1085136|   1.4330097|  -1.4713882|
| S3      | Var1 |  -1.4710519|  -0.8408262|   1.7495316|
| S3      | Var2 |   1.9320189|  -0.6925225|  -2.7898281|
| S3      | Var3 |   0.6901743|   0.4107205|   1.6803989|
